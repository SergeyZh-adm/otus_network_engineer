##  ДЗ 6. Внедрение маршрутизации между виртуальными локальными сетями.

![](Топология_6.PNG)

Немного изменим заданную топологию с целью лучшего анализа работы сети с использованием технологии виртуальных локальных сетей.

Добавим по одному хосту на коммутатор таким образом, чтобы на каждои коммутаторе присутствовали хосты разных VLAN-ов.  
 Кроме того добавим один хост в VLAN Управления. Это позволит иметь доступ к управлению коммутаторами в случае аварии с внутресетевой маршрутизацией.

![](Топология_6-1.PNG)

Твблица адресации.

| Устройство | Интерфейс    | IP-адрес    |Маска подсети | Шлюз по умолчанию|
|:----------:|:------------:|:-----------:|:------------:|:----------------:|
|  R1        | G0/0/1.10    | 192.168.10.1 |255.255.255.0|  -----           |
|  R1        | G0/0/1.20    | 192.168.20.1 |255.255.255.0|  -----           |
|  R1        | G0/0/1.30    | 192.168.10.1 |255.255.255. |  -----           |
|  R1        | G0/0/1.1000  | -----        |  -----      |  -----           |
|  SW1       | VLAN 10      | 192.168.10.11|255.255.255.0|192.168.10.1      |
|  SW2       | VLAN 10      | 192.168.20.12|255.255.255.0|192.168.10.1      |
|  PC1       | NIC          | 192.168.20.3 |255.255.255.0|192.168.20.1      |
|  PC2       | NIC          | 192.168.30.3 |255.255.255.0|192.168.30.1      |
|  PC3       | NIC          | 192.168.30.2 |255.255.255.0|192.168.30.1      |
|  PC4       | NIC          | 192.168.20.2 |255.255.255.0|192.168.20.1      |
|  PC5       | NIC          | 192.168.10.10 |255.255.255.0|192.168.10.1     |


Таблица VLAN

| VLAN | Имя   | Назначенный интерфейс    |
|:----------:|:------------:|:-----------:|
|  10        |Управление    | SW1: VLAN 10 , SW2: VLAN 10 , SW2: F0/3|
|  20        | Sales        | SW1: F0/2 , SW2: F0/1|
|  30        | Operations   | SW1: F0/1 , SW2: F0/2|
|  999       | Parking_Lot  | SW1: F0/3-24 , SW2: F0/4-24, SW2: G0/2|
|  1000      | Собственная  | -----        |

## Задачи
1. Создание сети и настройка основных параметров устройства.
2. Создание сетей VLAN и назначение портов коммутатора.
3. Конфигурация магистрального канала стандарта 802.1Q между коммутаторами.

4. Настройка маршрутизации между сетями VLAN.
5. Проверка работы маршрутизации между VLAN.

## Решение.
### 1. Создание сети и настройка основных параметров устройства.
-----------------------------------

Шаг 1.  Построим сеть заданной топологии. 

Шаг 2. Проведем настройку базовых параметров маршрутизатора R1.

* присваиваем имя;
* присваиваем доменное имя и создаем локального пользователя.
* Устанавливаем пароли на вход по консольной линии, вход на виртуальные линиии по протоколу SSH  и запрещаем вход по линии AUX;
* шифруем пароли, настраиваем предотвращение атаки с использованием пароля грубой силы;
* настраиваем баннер;
* настраиваем время на маршрутизаторе кмандой **clock set**.

Шаг 3. Проведем настройку базовых параметров коммутаторов SW1 и SW2.

* присваиваем имя;
* присваиваем доменное имя и создаем локального пользователя.
* Устанавливаем пароли на вход по консольной линии, вход на виртуальные линиии по протоколу SSH;
* шифруем пароли, настраиваем предотвращение атаки с использованием пароля грубой силы;
* настраиваем баннер;
* настраиваем время на коммутаторах кмандой **clock set**.

Шаг 4. Настраиваем узлы ПК.

Адреса ПК можно посмотреть в таблице адресации (см. выше).

### 2. Создание сетей VLAN и назначение портов коммутатора
-----------------
>Cоздадим VLAN, как указано в таблице выше, на обоих коммутаторах. Затем  назначим VLAN соответствующему интерфейсу и проверим настройки конфигурации. 

Шаг 1. Создайте сети VLAN на коммутаторах.

* a.	Создадим и присвоим имена необходимым VLAN на каждом коммутаторе из таблицы выше.
~~~
SW1#conf t
Enter configuration commands, one per line.  End with CNTL/Z.
SW1(config)#
SW1(config)#vlan 10
SW1(config-vlan)#
SW1(config-vlan)#name Control
SW1(config-vlan)#exit
SW1(config)#vlan 20
SW1(config-vlan)#name Sales1
SW1(config-vlan)#exit
SW1(config)#vlan 30
SW1(config-vlan)#
SW1(config-vlan)#name Operation
SW1(config-vlan)#exit
SW1(config)#vlan 999
SW1(config-vlan)#
SW1(config-vlan)#name Parking_Lot
SW1(config-vlan)#exit
SW1(config)#vlan 1000
SW1(config-vlan)#
SW1(config-vlan)#name Native
SW1(config-vlan)#exit
SW1(config)
~~~

На коммутаторе SW2 сделаем аналогичные настройки VLAN.

~~~
SW1#conf t
Enter configuration commands, one per line.  End with CNTL/Z.
SW2(config)#
SW2(config)#vlan 10
SW2(config-vlan)#
SW2(config-vlan)#name Control
SW2(config-vlan)#exit
SW2(config)#vlan 20
SW2(config-vlan)#name Sales1
SW2(config-vlan)#exit
SW2(config)#vlan 30
SW2(config-vlan)#
SW2(config-vlan)#name Operation
SW2(config-vlan)#exit
SW2(config)#vlan 999
SW2(config-vlan)#
SW2(config-vlan)#name Parking_Lot
SW2(config-vlan)#exit
SW2(config)#vlan 1000
SW2(config-vlan)#
SW2(config-vlan)#name Native
SW2(config-vlan)#exit
SW2(config)
~~~

* Настройте интерфейс управления и шлюз по умолчанию на каждом коммутаторе, используя информацию об IP-адресе в таблице адресации. 







